<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SportsBook Demo | Bet Now Server</title>

  <style>
    :root{
      --bg0:#070B12;
      --bg1:#0B1220;
      --card:#0E182B;
      --card2:#0B1526;
      --line:#1C2A44;
      --text:#EAF2FF;
      --muted:#9FB0D0;

      --accent:#36FF88;   /* neon green */
      --accent2:#00D4FF;  /* electric cyan */
      --warn:#FFB020;
      --danger:#FF4D6D;

      --shadow: 0 18px 50px rgba(0,0,0,.55);
      --radius: 16px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, Helvetica, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 15% -10%, rgba(54,255,136,.18), transparent 60%),
        radial-gradient(1000px 500px at 85% 0%, rgba(0,212,255,.16), transparent 55%),
        radial-gradient(900px 500px at 50% 110%, rgba(255,176,32,.08), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      min-height:100vh;
    }

    a{color:inherit}
    .wrap{
      width:min(1200px, 92vw);
      margin:0 auto;
      padding:18px 0 60px;
    }

    /* Top bar */
    header{
      position:sticky; top:0;
      backdrop-filter: blur(10px);
      background: rgba(7,11,18,.65);
      border-bottom:1px solid rgba(28,42,68,.65);
      z-index:30;
    }
    .topbar{
      width:min(1200px, 92vw);
      margin:0 auto;
      padding:14px 0;
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
    }

    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:800; letter-spacing:.5px;
    }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 12px;
      border:1px solid rgba(28,42,68,.9);
      background: rgba(14,24,43,.75);
      border-radius:999px;
      color:var(--muted);
      font-size:.9rem;
    }
    .pill b{color:var(--text)}
    .dot{width:8px;height:8px;border-radius:999px;background:var(--accent); box-shadow:0 0 16px rgba(54,255,136,.8)}

    .actions{display:flex; gap:10px; align-items:center; flex-wrap:wrap; justify-content:flex-end}
    .btn{
      border:1px solid rgba(28,42,68,.95);
      background: rgba(14,24,43,.85);
      color:var(--text);
      padding:10px 12px;
      border-radius:12px;
      cursor:pointer;
      transition: transform .12s ease, border-color .12s ease, box-shadow .12s ease;
      font-weight:650;
    }
    .btn:hover{transform: translateY(-1px); border-color: rgba(54,255,136,.55); box-shadow: 0 10px 26px rgba(0,0,0,.35)}
    .btn:active{transform: translateY(0px) scale(.99)}
    .btn.primary{
      border-color: rgba(54,255,136,.65);
      box-shadow: 0 0 0 1px rgba(54,255,136,.12) inset;
    }
    .btn.ghost{
      background: transparent;
    }

    /* Layout */
    .grid{
      display:grid;
      grid-template-columns: 1.65fr .85fr;
      gap:18px;
      margin-top:18px;
      align-items:start;
    }
    @media (max-width: 980px){
      .grid{grid-template-columns:1fr}
    }

    /* Cards */
    .card{
      background: linear-gradient(180deg, rgba(14,24,43,.92), rgba(11,21,38,.92));
      border:1px solid rgba(28,42,68,.95);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .card .hd{
      padding:16px 16px 12px;
      border-bottom:1px solid rgba(28,42,68,.75);
      display:flex; align-items:flex-start; justify-content:space-between; gap:10px;
    }
    .card .hd h2{
      margin:0;
      font-size:1.05rem;
      letter-spacing:.2px;
    }
    .sub{
      margin:6px 0 0;
      color:var(--muted);
      font-size:.9rem;
    }
    .content{padding:16px}

    /* Match header */
    .matchRow{
      display:flex; align-items:center; justify-content:space-between; gap:14px;
      flex-wrap:wrap;
    }
    .teams{
      display:flex; align-items:center; gap:12px;
      font-weight:850;
      font-size:1.2rem;
      letter-spacing:.3px;
    }
    .vs{
      color:var(--muted);
      font-weight:700;
      font-size:.95rem;
      border:1px solid rgba(28,42,68,.9);
      padding:6px 10px;
      border-radius:999px;
      background: rgba(7,11,18,.35);
    }
    .tagLive{
      display:inline-flex; align-items:center; gap:8px;
      color:var(--muted);
      font-size:.9rem;
    }

    /* Player strip */
    .players{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:12px;
      margin-top:14px;
    }
    @media (max-width: 980px){
      .players{grid-template-columns: repeat(2, 1fr)}
    }
    .pCard{
      background: rgba(7,11,18,.35);
      border:1px solid rgba(28,42,68,.75);
      border-radius: 14px;
      overflow:hidden;
      transition: transform .12s ease, border-color .12s ease;
    }
    .pCard:hover{transform: translateY(-2px); border-color: rgba(0,212,255,.45)}
    .pImg{
      height:140px;
      background: rgba(14,24,43,.8);
      display:flex; align-items:center; justify-content:center;
      overflow:hidden;
    }
    .pImg img{
      width:100%;
      height:100%;
      object-fit:cover;
      transform: scale(1.03);
      filter: contrast(1.05) saturate(1.05);
    }
    .pMeta{padding:10px 10px 12px}
    .pName{font-weight:850; font-size:.95rem}
    .pTeam{color:var(--muted); font-size:.85rem; margin-top:3px}
    .pBadge{
      margin-top:8px;
      display:inline-flex;
      gap:8px;
      align-items:center;
      font-size:.78rem;
      color:var(--muted);
      border:1px solid rgba(28,42,68,.85);
      border-radius:999px;
      padding:6px 10px;
      background: rgba(14,24,43,.55);
    }

    /* Markets */
    .marketGrid{
      display:grid;
      grid-template-columns: 1fr;
      gap:12px;
      margin-top:10px;
    }
    .market{
      background: rgba(7,11,18,.25);
      border:1px solid rgba(28,42,68,.75);
      border-radius: 14px;
      padding:12px;
    }
    .mTitle{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      margin-bottom:10px;
    }
    .mTitle b{font-size:.95rem}
    .mTitle span{color:var(--muted); font-size:.85rem}

    .oddsRow{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
    }
    @media (max-width: 520px){
      .oddsRow{grid-template-columns:1fr}
    }

    .oddBtn{
      width:100%;
      text-align:left;
      border:1px solid rgba(28,42,68,.95);
      background: rgba(14,24,43,.75);
      color:var(--text);
      padding:12px 12px;
      border-radius: 14px;
      cursor:pointer;
      transition: transform .12s ease, border-color .12s ease, box-shadow .12s ease;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      min-height:50px;
    }
    .oddBtn:hover{transform: translateY(-1px); border-color: rgba(54,255,136,.55); box-shadow:0 10px 24px rgba(0,0,0,.35)}
    .oddBtn.active{
      border-color: rgba(54,255,136,.95);
      box-shadow: 0 0 0 1px rgba(54,255,136,.15) inset, 0 12px 28px rgba(0,0,0,.45);
    }
    .oddLeft .label{font-weight:850}
    .oddLeft .line{color:var(--muted); font-size:.85rem; margin-top:2px}
    .oddRight{
      font-weight:900;
      color: var(--accent);
      letter-spacing:.3px;
      font-variant-numeric: tabular-nums;
    }
    .oddRight.down{color: var(--danger)}
    .oddRight.up{color: var(--accent2)}
    .tiny{
      color:var(--muted);
      font-size:.82rem;
      margin-top:10px;
    }

    /* Bet slip */
    .slip{
      position:sticky;
      top:78px;
    }
    .slipBody{padding:14px 14px 16px}
    .slipEmpty{
      color:var(--muted);
      background: rgba(7,11,18,.25);
      border:1px dashed rgba(28,42,68,.95);
      border-radius: 14px;
      padding:12px;
      line-height:1.35;
    }
    .ticket{
      background: rgba(7,11,18,.25);
      border:1px solid rgba(28,42,68,.85);
      border-radius: 14px;
      padding:12px;
    }
    .tRow{display:flex; justify-content:space-between; gap:10px; align-items:flex-start}
    .tPick{font-weight:850; margin:0}
    .tMeta{margin-top:4px; color:var(--muted); font-size:.85rem}
    .tOdd{font-weight:900; color:var(--accent); font-variant-numeric: tabular-nums}
    .divider{height:1px;background:rgba(28,42,68,.75); margin:12px 0}

    .field{
      display:grid;
      gap:8px;
    }
    input[type="number"]{
      width:100%;
      border:1px solid rgba(28,42,68,.95);
      background: rgba(14,24,43,.6);
      color:var(--text);
      padding:12px 12px;
      border-radius: 12px;
      font-size:1rem;
      outline:none;
    }
    input[type="number"]:focus{border-color: rgba(0,212,255,.65)}
    .kv{display:flex; justify-content:space-between; color:var(--muted); font-size:.9rem}
    .kv b{color:var(--text); font-variant-numeric: tabular-nums}

    .place{
      width:100%;
      margin-top:12px;
      padding:12px 12px;
      border-radius: 14px;
      border:1px solid rgba(54,255,136,.8);
      background: linear-gradient(180deg, rgba(54,255,136,.18), rgba(54,255,136,.06));
      color:var(--text);
      font-weight:900;
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease;
    }
    .place:disabled{
      opacity:.45;
      cursor:not-allowed;
      filter: grayscale(.2);
    }
    .place:not(:disabled):hover{transform: translateY(-1px)}
    .place:not(:disabled):active{transform: translateY(0px) scale(.99)}

    .miniRow{display:flex; gap:10px; margin-top:12px}
    .miniRow .btn{flex:1}

    /* Toast */
    .toasts{
      position:fixed;
      right:14px;
      bottom:14px;
      display:grid;
      gap:10px;
      z-index:60;
      width:min(360px, 92vw);
    }
    .toast{
      background: rgba(14,24,43,.92);
      border:1px solid rgba(28,42,68,.95);
      border-radius: 14px;
      padding:12px;
      box-shadow: 0 18px 50px rgba(0,0,0,.6);
      animation: pop .18s ease;
    }
    @keyframes pop{from{transform: translateY(6px); opacity:.2} to{transform: translateY(0); opacity:1}}
    .toast b{display:block; margin-bottom:2px}
    .toast span{color:var(--muted); font-size:.9rem}

    /* Modal */
    .modalWrap{
      position:fixed; inset:0;
      background: rgba(0,0,0,.55);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:70;
      padding:16px;
    }
    .modal{
      width:min(520px, 96vw);
      background: rgba(14,24,43,.95);
      border:1px solid rgba(28,42,68,.95);
      border-radius: 18px;
      box-shadow: 0 30px 90px rgba(0,0,0,.75);
      overflow:hidden;
    }
    .modal .hd{border-bottom:1px solid rgba(28,42,68,.75)}
    .modal .content{padding:16px}
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace}
    footer{
      margin-top:22px;
      color:var(--muted);
      font-size:.85rem;
      text-align:center;
      line-height:1.45;
    }
  </style>
</head>

<body>
<header>
  <div class="topbar">
    <div class="brand">
      <span style="font-size:1.2rem">üèà</span>
      <span>BetNow <span style="color:var(--accent)">Demo</span></span>
      <span class="pill"><span class="dot"></span> <b>LIVE</b> odds (sim)</span>
    </div>

    <div class="actions">
      <span class="pill">Balance: <b id="bal">$250.00</b></span>
      <button class="btn ghost" id="refreshBtn">Refresh Odds</button>
      <button class="btn primary" id="btn">Click me üòÑ</button>
    </div>
  </div>
</header>

<div class="wrap">
  <div class="grid">
    <!-- MAIN -->
    <div>
      <div class="card">
        <div class="hd">
          <div>
            <h2>SportsBook Demo</h2>
            <p class="sub">Official Interactive Betting Page (Demo / No real wagering)</p>
          </div>
          <div class="tagLive">
            <span class="vs">NFL ‚Ä¢ Prime Time</span>
            <span class="vs" id="clock">Kickoff: 8:20 PM</span>
          </div>
        </div>

        <div class="content">
          <div class="matchRow">
            <div class="teams">
              <span>Kansas City</span>
              <span class="vs">VS</span>
              <span>San Francisco 49ers</span>
            </div>
            <div class="pill">Market: <b>Full Game</b> ‚Ä¢ <span id="lastMove">Odds moving‚Ä¶</span></div>
          </div>

          <!-- Player strip -->
          <div class="players">
            <div class="pCard">
              <div class="pImg">
                <img src="https://upload.wikimedia.org/wikipedia/commons/9/92/Patrick_Mahomes_%2851615475056%29.jpg" alt="Patrick Mahomes" />
              </div>
              <div class="pMeta">
                <div class="pName">Patrick Mahomes</div>
                <div class="pTeam">Chiefs ‚Ä¢ QB</div>
                <div class="pBadge">‚≠ê Featured</div>
              </div>
            </div>

            <div class="pCard">
              <div class="pImg">
                <img src="https://upload.wikimedia.org/wikipedia/commons/8/87/Travis_Kelce_2021.jpg" alt="Travis Kelce" />
              </div>
              <div class="pMeta">
                <div class="pName">Travis Kelce</div>
                <div class="pTeam">Chiefs ‚Ä¢ TE</div>
                <div class="pBadge">üß§ Anytime TD</div>
              </div>
            </div>

            <div class="pCard">
              <div class="pImg">
                <img src="https://upload.wikimedia.org/wikipedia/commons/4/4f/Brock_Purdy.jpg" alt="Brock Purdy" />
              </div>
              <div class="pMeta">
                <div class="pName">Brock Purdy</div>
                <div class="pTeam">49ers ‚Ä¢ QB</div>
                <div class="pBadge">üéØ Passing Yds</div>
              </div>
            </div>

            <div class="pCard">
              <div class="pImg">
                <img src="https://upload.wikimedia.org/wikipedia/commons/6/6c/Christian_McCaffrey_2021.jpg" alt="Christian McCaffrey" />
              </div>
              <div class="pMeta">
                <div class="pName">Christian McCaffrey</div>
                <div class="pTeam">49ers ‚Ä¢ RB</div>
                <div class="pBadge">üî• Rush+Rec</div>
              </div>
            </div>
          </div>

          <!-- Markets -->
          <div class="marketGrid" id="marketGrid"></div>

          <div class="tiny">
            Tip: Click an odds box to add it to the bet slip. Click it again to remove.
          </div>
        </div>
      </div>

      <footer>
        Demo only ‚Äî no real wagering. Player images are from Wikimedia Commons (Creative Commons licenses).
        Consider downloading/hosting images locally if you don‚Äôt want hotlinks.
      </footer>
    </div>

    <!-- BET SLIP -->
    <div class="slip">
      <div class="card">
        <div class="hd">
          <div>
            <h2>Bet Slip</h2>
            <p class="sub">Single (Demo)</p>
          </div>
          <span class="vs" id="slipStatus">0 selected</span>
        </div>

        <div class="slipBody" id="slipBody">
          <div class="slipEmpty" id="emptyState">
            Nothing selected yet.<br />
            Click an odds box on the left to start a demo bet.
          </div>

          <div class="ticket" id="ticket" style="display:none">
            <div class="tRow">
              <div>
                <p class="tPick" id="tPick">‚Äî</p>
                <div class="tMeta" id="tMeta">‚Äî</div>
              </div>
              <div class="tOdd" id="tOdd">‚Äî</div>
            </div>

            <div class="divider"></div>

            <div class="field">
              <label class="kv"><span>Stake</span><b class="mono" id="stakeLabel">$</b></label>
              <input id="stake" type="number" min="1" step="1" value="25" />
              <div class="kv"><span>Potential Profit</span><b id="profit" class="mono">$0.00</b></div>
              <div class="kv"><span>Total Payout</span><b id="payout" class="mono">$0.00</b></div>
            </div>

            <button class="place" id="placeBtn">Place Bet (Demo)</button>

            <div class="miniRow">
              <button class="btn" id="clearBtn">Clear</button>
              <button class="btn ghost" id="randomBtn">Lucky Pick</button>
            </div>
          </div>

          <p class="tiny">
            Odds are simulated and will ‚Äúmove‚Äù slightly. This is a UI demo for your local Apache server.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Toast container -->
<div class="toasts" id="toasts"></div>

<!-- Confirm modal -->
<div class="modalWrap" id="modalWrap" role="dialog" aria-modal="true">
  <div class="modal">
    <div class="hd">
      <div style="padding:16px">
        <h2 style="margin:0">‚úÖ Bet Submitted (Demo)</h2>
        <p class="sub" style="margin:6px 0 0">This is a pretend ticket ‚Äî no real wager.</p>
      </div>
    </div>
    <div class="content">
      <div class="ticket">
        <div class="kv"><span>Ticket ID</span><b class="mono" id="ticketId">‚Äî</b></div>
        <div class="divider"></div>
        <div class="kv"><span>Pick</span><b id="mPick" class="mono">‚Äî</b></div>
        <div class="kv"><span>Odds</span><b id="mOdds" class="mono">‚Äî</b></div>
        <div class="kv"><span>Stake</span><b id="mStake" class="mono">‚Äî</b></div>
        <div class="kv"><span>Potential Payout</span><b id="mPayout" class="mono">‚Äî</b></div>
      </div>

      <div class="miniRow">
        <button class="btn primary" id="closeModal">Done</button>
        <button class="btn ghost" id="printBtn">Print</button>
      </div>
    </div>
  </div>
</div>

<script>
  // --- Demo markets (American odds) ---
  const markets = [
    {
      title: "Moneyline",
      note: "Winner",
      options: [
        { id: "ml_kc", label: "Kansas City", line: "ML", odds: -125 },
        { id: "ml_sf", label: "49ers",        line: "ML", odds: +110 },
        { id: "ml_draw", label: "Draw",       line: "Regulation (Demo)", odds: +900 }
      ]
    },
    {
      title: "Point Spread",
      note: "Full game",
      options: [
        { id: "sp_kc", label: "Kansas City", line: "-1.5", odds: -110 },
        { id: "sp_sf", label: "49ers",       line: "+1.5", odds: -110 },
        { id: "sp_alt", label: "Alt Spread", line: "KC -3.5", odds: +135 }
      ]
    },
    {
      title: "Total Points",
      note: "Over/Under",
      options: [
        { id: "tot_over", label: "Over",  line: "47.5", odds: -105 },
        { id: "tot_under", label: "Under", line: "47.5", odds: -115 },
        { id: "tot_alt", label: "Alt Total", line: "Over 51.5", odds: +145 }
      ]
    }
  ];

  const marketGrid = document.getElementById("marketGrid");

  // State: single selection demo
  let selected = null; // { id, market, label, line, odds }

  function fmtOdds(n){
    return (n > 0 ? `+${n}` : `${n}`);
  }

  function americanToDecimal(odds){
    // Decimal odds: +110 => 2.10 ; -110 => 1.909...
    if (odds > 0) return 1 + (odds / 100);
    return 1 + (100 / Math.abs(odds));
  }

  function money(n){
    return `$${Number(n).toFixed(2)}`;
  }

  function toast(title, msg){
    const el = document.createElement("div");
    el.className = "toast";
    el.innerHTML = `<b>${title}</b><span>${msg}</span>`;
    document.getElementById("toasts").appendChild(el);
    setTimeout(()=> el.remove(), 2600);
  }

  function renderMarkets(){
    marketGrid.innerHTML = "";

    markets.forEach(m => {
      const wrap = document.createElement("div");
      wrap.className = "market";

      const hd = document.createElement("div");
      hd.className = "mTitle";
      hd.innerHTML = `<b>${m.title}</b><span>${m.note}</span>`;
      wrap.appendChild(hd);

      const row = document.createElement("div");
      row.className = "oddsRow";

      m.options.forEach(opt => {
        const btn = document.createElement("button");
        btn.className = "oddBtn";
        btn.dataset.id = opt.id;

        const active = selected && selected.id === opt.id;
        if (active) btn.classList.add("active");

        btn.innerHTML = `
          <div class="oddLeft">
            <div class="label">${opt.label}</div>
            <div class="line">${opt.line}</div>
          </div>
          <div class="oddRight">${fmtOdds(opt.odds)}</div>
        `;

        btn.addEventListener("click", () => {
          if (selected && selected.id === opt.id){
            selected = null;
            toast("Removed", "Selection cleared.");
          } else {
            selected = { ...opt, market: m.title };
            toast("Added to Bet Slip", `${opt.label} ‚Ä¢ ${opt.line} @ ${fmtOdds(opt.odds)}`);
          }
          renderMarkets();
          syncSlip();
        });

        row.appendChild(btn);
      });

      wrap.appendChild(row);
      marketGrid.appendChild(wrap);
    });
  }

  // Bet slip elements
  const emptyState = document.getElementById("emptyState");
  const ticket = document.getElementById("ticket");
  const slipStatus = document.getElementById("slipStatus");
  const tPick = document.getElementById("tPick");
  const tMeta = document.getElementById("tMeta");
  const tOdd  = document.getElementById("tOdd");
  const stake = document.getElementById("stake");
  const profit = document.getElementById("profit");
  const payout = document.getElementById("payout");
  const placeBtn = document.getElementById("placeBtn");

  function calc(){
    if (!selected) return;
    const s = Math.max(0, Number(stake.value || 0));
    const dec = americanToDecimal(selected.odds);
    const total = s * dec;
    const prof = total - s;
    profit.textContent = money(prof);
    payout.textContent = money(total);
    placeBtn.disabled = !(s > 0);
  }

  function syncSlip(){
    slipStatus.textContent = selected ? "1 selected" : "0 selected";
    if (!selected){
      emptyState.style.display = "block";
      ticket.style.display = "none";
      placeBtn.disabled = true;
      return;
    }

    emptyState.style.display = "none";
    ticket.style.display = "block";
    tPick.textContent = `${selected.label}`;
    tMeta.textContent = `${selected.market} ‚Ä¢ ${selected.line}`;
    tOdd.textContent = fmtOdds(selected.odds);

    calc();
  }

  stake.addEventListener("input", calc);

  // Buttons
  document.getElementById("clearBtn").addEventListener("click", () => {
    selected = null;
    renderMarkets();
    syncSlip();
    toast("Cleared", "Bet slip emptied.");
  });

  document.getElementById("randomBtn").addEventListener("click", () => {
    // Pick a random option from all markets
    const all = markets.flatMap(m => m.options.map(o => ({...o, market:m.title})));
    selected = all[Math.floor(Math.random() * all.length)];
    renderMarkets();
    syncSlip();
    toast("Lucky Pick", `${selected.label} ‚Ä¢ ${selected.line} @ ${fmtOdds(selected.odds)}`);
  });

  // Fake odds movement
  const lastMove = document.getElementById("lastMove");
  function bumpOdds(){
    // Slightly nudge each odds value
    markets.forEach(m => {
      m.options.forEach(o => {
        const roll = Math.random();
        if (roll < 0.5) return;

        const step = [5,10,15][Math.floor(Math.random()*3)];
        const dir = Math.random() < 0.5 ? -1 : 1;

        // Keep odds sane: cap between -250 and +950
        let next = o.odds + (dir * step);
        next = Math.max(-250, Math.min(950, next));
        if (next === 0) next = dir > 0 ? 105 : -105;
        o.odds = next;
      });
    });

    const t = new Date().toLocaleTimeString([], {hour:"2-digit", minute:"2-digit"});
    lastMove.textContent = `Updated ${t}`;
    renderMarkets();
    syncSlip();
  }

  document.getElementById("refreshBtn").addEventListener("click", () => {
    bumpOdds();
    toast("Odds Updated", "New simulated prices are live.");
  });

  setInterval(() => {
    bumpOdds();
  }, 12000);

  // Modal / "Place bet"
  const modalWrap = document.getElementById("modalWrap");
  const closeModal = document.getElementById("closeModal");
  const printBtn = document.getElementById("printBtn");

  function openModal(){
    modalWrap.style.display = "flex";
  }
  function closeIt(){
    modalWrap.style.display = "none";
  }
  closeModal.addEventListener("click", closeIt);
  modalWrap.addEventListener("click", (e) => {
    if (e.target === modalWrap) closeIt();
  });
  printBtn.addEventListener("click", () => window.print());

  placeBtn.addEventListener("click", () => {
    if (!selected) return;

    const s = Math.max(0, Number(stake.value || 0));
    if (!(s > 0)) return;

    // Fake balance deduction
    const balEl = document.getElementById("bal");
    const cur = Number(balEl.textContent.replace(/[$,]/g,"")) || 0;
    const next = Math.max(0, cur - s);
    balEl.textContent = money(next);

    // Fill modal ticket
    document.getElementById("ticketId").textContent = "DN-" + Math.random().toString(16).slice(2,10).toUpperCase();
    document.getElementById("mPick").textContent = `${selected.label} ‚Ä¢ ${selected.market}`;
    document.getElementById("mOdds").textContent = `${selected.line} @ ${fmtOdds(selected.odds)}`;
    document.getElementById("mStake").textContent = money(s);
    document.getElementById("mPayout").textContent = payout.textContent;

    toast("Submitted", "Demo ticket created.");
    openModal();
  });

  // Your ‚Äúfunny.js‚Äù lazy loader button
  document.getElementById("btn").addEventListener("click", () => {
    if (document.getElementById("lazyScript")) return;
    const s = document.createElement("script");
    s.id = "lazyScript";
    s.src = "./funny.js";
    s.onload = () => toast("Loaded", "funny.js is now active üòà");
    s.onerror = () => toast("Oops", "Couldn‚Äôt load funny.js ‚Äî check the file exists.");
    document.body.appendChild(s);
  });

  // Initial render
  renderMarkets();
  syncSlip();
</script>
</body>
</html>
